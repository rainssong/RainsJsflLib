//(Auto Name Package)//Auto Name Layer//Justin Putney//http://ajarproductions.com//version 1.0.0var dom = fl.getDocumentDOM();var tl = dom.getTimeline();var layerSeq = tl.getSelectedLayers();var frameSeq = tl.getSelectedFrames();function nameByElement(s){		if(s == "[object SymbolInstance]"){			var path = s.libraryItem.name;			var mc_name = path.substr(path.lastIndexOf("/")+1);			s.layer.name = mc_name;		} else if (s == "[object Bitmap]"){			var path = dom.selection[i].libraryItem.name;			var mc_name = path.substr(path.lastIndexOf("/")+1);			s.layer.name = "bmp: " + mc_name;		} else if (s == "[object Text]"){			var textSample = s.getTextString(0, 11);			s.layer.name = "txt: " + textSample + "...";		}}if (dom.selection.length > 0){	//fl.trace('going by selection array');	var selectedItems = dom.selection;	for(var i = 0; i < selectedItems.length; i++){		nameByElement(selectedItems[i]);	}} else if(frameSeq.length > 0) {	//fl.trace('going by frames');	for (var i = 0; i < frameSeq.length; i+=3){		var tlayerNum = frameSeq[i];		var tlayer = tl.layers[tlayerNum];		var tframe = tlayer.frames[frameSeq[i+1]];		if(tframe.actionScript.length > 0) {			tlayer.name = "actions";			tlayer.locked = true;			break;		} else if (tframe.name.length > 0){			tlayer.name = "labels";			tlayer.locked = true;			break;		} else if (tframe.soundName.length > 0){			tlayer.name = "audio";			tlayer.locked = true;			break;		} else if (tframe.elements.length > 0){			nameByElement(tframe.elements[0]);			break;		} else { //navigate the selection			for(var j=frameSeq[i+1]; j < frameSeq[i+2]; j++){			var tFrame = tlayer.frames[j];				if(tFrame == undefined) {					break;				}				if(tFrame.startFrame == j) { //only run on keyframes					if(tFrame.elements.length > 0) {						nameByElement(tFrame.elements[0]);						break;					} else if(tFrame.actionScript.length > 0) {						tlayer.name = "actions";						tlayer.locked = true;						break;					} else if (tFrame.name.length > 0){						tlayer.name = "labels";						tlayer.locked = true;						break;					} else if (tFrame.soundName.length > 0){						tlayer.name = "audio";						tlayer.locked = true;						break;					}				} else { //skip to next keyframe					j = tFrame.startFrame + tFrame.duration - 1;					continue;				}			}		}	}	} else if(layerSeq.length > 0){	//fl.trace('going by layers');	for(var i = 0; i < layerSeq.length; i++){		var tLayerNum = layerSeq[i];		var tLayer = tl.layers[tLayerNum];		for(var j=0; j < tLayer.frameCount; j++){			var tFrame = tLayer.frames[j];			if(tFrame == undefined) {				break;			}			if(tFrame.startFrame == j) { //only run on keyframes				if(tFrame.elements.length > 0) {					nameByElement(tFrame.elements[0]);					break;				} else if(tFrame.actionScript.length > 0) {						tLayer.name = "actions";						tLayer.locked = true;						break;					} else if (tFrame.name.length > 0){						tLayer.name = "labels";						tLayer.locked = true;						break;					} else if (tFrame.soundName.length > 0){						tLayer.name = "audio";						tLayer.locked = true;						break;					}			} else { //skip to next keyframe				j = tFrame.startFrame + tFrame.duration - 1;				continue;			}		}	}}